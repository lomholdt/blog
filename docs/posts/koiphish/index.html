<!DOCTYPE html>
<html lang="en-us">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <meta property="og:title" content=" KoiPhish - The Beautiful Phishing Proxy &middot;  wunderwuzzi blog" />
  
  <meta property="og:site_name" content="wunderwuzzi blog" />
  <meta property="og:url" content="https://wunderwuzzi23.github.io/blog/posts/koiphish/" />
  
  
  <meta property="og:type" content="article" />
  
  <meta property="og:article:published_time" content="2019-01-10T21:40:59-07:00" />
  
  <meta property="og:article:tag" content="pentesting" />
  
  <meta property="og:article:tag" content="red" />
  
  <meta property="og:article:tag" content="code" />
  
  <meta property="og:article:tag" content="phishing" />
  
  

  <title>
     KoiPhish - The Beautiful Phishing Proxy &middot;  wunderwuzzi blog
  </title>

  <link rel="stylesheet" href="https://wunderwuzzi23.github.io/blog/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://wunderwuzzi23.github.io/blog/css/main.css" />
  <link rel="stylesheet" href="https://wunderwuzzi23.github.io/blog/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://wunderwuzzi23.github.io/blog/css/github.css" />
  
  <link rel="stylesheet" href="https://wunderwuzzi23.github.io/blog/fonts/cachedfonts.css" type="text/css">
  <link rel="shortcut icon" href="https://wunderwuzzi23.github.io/blog/images/favicon.ico" />
  <link rel="apple-touch-icon" href="https://wunderwuzzi23.github.io/blog/images/apple-touch-icon.png" />
  
</head>
<body>
    <header class="global-header"  style="background-image:url( /images/bg.jpg )">
    <section class="header-text">
      <h1><a href="https://wunderwuzzi23.github.io/blog/">wunderwuzzi blog</a></h1>
      
      <div class="tag-line" style="min-width:fit-content; font-weight: 500;">
        Embrace the Red
        <br><a style="color: greenyellow; font-weight:300;text-decoration: underline; " href="https://www.amazon.com/Cybersecurity-Attacks-Strategies-practical-penetration-ebook/dp/B0822G9PTM">Cybersecurity Attacks - Red Team Strategies</a> 
      </div>
      
      <div class="sns-links hidden-print">
  
  <a href="mailto:security@wunderwuzzi.net">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/wunderwuzzi23" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  
  <a href="https://github.com/wunderwuzzi23" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  
  
  
  
</div>

      
      <a href="https://wunderwuzzi23.github.io/blog/" class="btn-header btn-back hidden-xs">
        <i class="fa fa-angle-left" aria-hidden="true"></i>
        &nbsp;Home
      </a>
      
      
    </section>
  </header>
  <main class="container">


<article>
  <header>
    <h1 class="text-primary">KoiPhish - The Beautiful Phishing Proxy</h1>
    <div class="post-meta clearfix">
    
      <div class="post-date pull-left">
        Posted on
        <time datetime="2019-01-10T21:40:59-07:00">
          Jan 10, 2019
        </time>
      </div>
    
      <div class="pull-right">
        
        <span class="post-tag small"><a href="https://wunderwuzzi23.github.io/blog//tags/pentesting">#pentesting</a></span>
        
        <span class="post-tag small"><a href="https://wunderwuzzi23.github.io/blog//tags/red">#red</a></span>
        
        <span class="post-tag small"><a href="https://wunderwuzzi23.github.io/blog//tags/code">#code</a></span>
        
        <span class="post-tag small"><a href="https://wunderwuzzi23.github.io/blog//tags/phishing">#phishing</a></span>
        
      </div>
    </div>
  </header>
  <section>
    

<p><strong>KoiPhish is a simple yet beautiful relay proxy idea.</strong></p>

<p>The idea for this little project goes back many years. Since I started learning Golang I figured it would be good exercise to finally go ahead an implement it. So, last December during the 35C3 (which is always inspiring congress) I wrote it up.</p>

<p>It relays requests a client makes to the KoiPish to the actual target and responses are sent back to the client. On the way in and out common links are overwritten in order to not break the user experience and functionality.</p>

<p>The benefit of this approach compared to cloning a website is that it will have the same look and feel as the target, and automatically adjust to changes down the road.</p>

<p>The code is basic at this point, and it&rsquo;s intentionally not &ldquo;point and click&rdquo;.</p>

<h2 id="illustration">Illustration</h2>

<pre><code>                                        Keep Relaying 
End User  +-------------&gt;   KoiPhish   +-------------&gt;   Actual Login Page
                                       &lt;-------------+            
           Keep Relaying
          +-------------&gt;              +-------------&gt;   and MFA Provider
          &lt;-------------+              &lt;-------------+           
</code></pre>

<p>An adversary can continue this until the passwords and/or session tokens (after 2FA) are grabbed.</p>

<p>The KoiPhish Golang code can be found on Github: <a href="https://github.com/wunderwuzzi23/KoiPhish">KoiPhish Code</a></p>

<h2 id="mitigation">Mitigation</h2>

<p>Leverage security keys and U2FA to help mitigate phishing attacks. Learn more here, this is important if you want to tackle phishing:</p>

<ul>
<li>FIDO Alliance</li>
<li>WebAuthN</li>
</ul>

<h2 id="disclaimer">Disclaimer</h2>

<p>Pentesting requires authorization and consent by appropriate stakeholders. Don&rsquo;t do illegal things.</p>

  </section>
  <footer>
    
    
    
    <section class="author-info row">
      <div class="author-avatar col-md-2">
        
      </div>
      <div class="author-meta col-md-6">
        
        
      </div>
      
      <div class="author-contact col-md-4">
        <a href="mailto:security@wunderwuzzi.net">
          <i class="fa fa-envelope-o" aria-hidden="true"></i>
          &nbsp;Contact me
        </a>
      </div>
      
    </section>
    <ul class="pager">
      
      <li class="previous"><a href="https://wunderwuzzi23.github.io/blog/posts/lldbbasics/"><span aria-hidden="true">&larr;</span> Older</a></li>
      
      
      <li class="next"><a href="https://wunderwuzzi23.github.io/blog/posts/lyrebird/">Newer <span aria-hidden="true">&rarr;</span></a></li>
      
    </ul>
  </footer>
</article>

  </main>
  <footer class="container global-footer">
    <div class="copyright-note pull-left">
      &copy; WUNDERWUZZI 2020
    </div>
    <div class="sns-links hidden-print">
  
  <a href="mailto:security@wunderwuzzi.net">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://twitter.com/wunderwuzzi23" target="_blank">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  
  
  <a href="https://github.com/wunderwuzzi23" target="_blank">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  
  
  
  
</div>

  </footer>

  <script src="https://wunderwuzzi23.github.io/blog/js/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-90341594-2', 'auto');  
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview', { 'anonymizeIp': true });
  </script>
  
  
</body>
</html>

